
var React = require('react/addons'),
    d3 = require('d3'),
    CurrencyFormat = require('hackoregon/utils/CurrencyFormat');
    
function normalize(_value, maxValue) {
  var value = _value || 0;
  var result = 100.0 * Math.sqrt(value / maxValue);
  if (result < 5.0) {
    return 5.0;
  }
  return result;
}

var WhoGiving = React.createClass({
    propTypes: {
        icon: React.PropTypes.string,
        title: React.PropTypes.string,
        max: React.PropTypes.number,
        amount: React.PropTypes.number
    },
    getDefaultProps: function() {
        return {
            icon: '',
            title: '',
            max: 0,
            amount: 0
        };
    },
    getIcon: function() {
        return "funding-icon " + this.props.icon;
    },
    getIconStyle: function() {
          var sz = normalize(this.props.amount, this.props.max);
          var margin = (100 - sz) / 2;
          return {
            width: sz + '%',
            height: sz + '%',
            position: 'relative',
            top: margin + '%',
            left: margin + '%'
          }
    },
    render: function() {
        return (
            <div className="source">
                <div className="icon-container">
                    <div className={this.getIcon()} style={this.getIconStyle()}></div>
                </div>
                <div>
                    <p className="h3 text-center"> {this.props.title} </p>
                    <p className="h4 text-center"> {CurrencyFormat(this.props.amount)}</p>
                </div>
            </div>
        )
    }
});

module.exports = WhoGiving;

        
        